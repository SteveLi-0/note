# 面试中常见的凸优化相关问题的整理
## 优化问题的基本形式
$$
\begin{array}{c}\min&f(x)\\\mathrm{s.t.}&g(x)\leq0\\&h(x)=0\end{array}
$$
## 无约束优化问题
### 线搜索
### 梯度法
### 牛顿法
## 带约束优化问题
### 对偶问题
#### Lagrange 对偶函数和对偶问题

拉格朗日对偶函数是优化问题中引入的一个概念，旨在通过转换原始问题来简化求解过程。它是拉格朗日乘子法在凸优化中的推广，尤其适用于处理带约束的优化问题。

考虑一个带有约束的标准优化问题：

$$
\begin{array}{rl}
\min & f(x) \\
\text{s.t.} & g_i(x) \leq 0, \quad i = 1, \cdots, m, \\
            & h_j(x) = 0, \quad j = 1, \cdots, n.
\end{array}
$$

其中，\(f(x)\) 是目标函数，\(g_i(x)\) 是不等式约束，\(h_j(x)\) 是等式约束。

拉格朗日函数（Lagrangian Function）通过引入拉格朗日乘子将约束条件整合到目标函数中，形式如下：

$$
\mathcal{L}(x, \lambda, \nu) = f(x) + \sum_{i} \lambda_i g_i(x) + \sum_{j} \nu_j h_j(x)
$$

其中，\(\lambda_i\) 是不等式约束对应的拉格朗日乘子，\(\nu_j\) 是等式约束对应的拉格朗日乘子。

为了得到拉格朗日对偶函数，我们对拉格朗日函数在 \(x\) 上取极小值(下确界)：

$$
g(\lambda, \nu) = \inf_{x} \mathcal{L}(x, \lambda, \nu)
$$

**这个函数 \(g(\lambda, \nu)\) 就是拉格朗日对偶函数。** 它表示对于任意的拉格朗日乘子组合 \((\lambda, \nu)\)，目标函数在考虑约束条件的情况下能够达到的最小值。

拉格朗日对偶函数的重要性在于，它将原始优化问题转换成一个对偶问题：

$$
\begin{array}{rl}
\max_{\lambda>0, \nu} & g(\lambda, \nu) \\
\text{s.t.} & \lambda_i \geq 0, \quad i = 1, \cdots, m.
\end{array}
$$

- 即使原问题不是凸的，对偶函数一定是凹的。

对偶问题通常比原始问题更容易求解，特别是在凸优化问题中，原始问题与对偶问题的最优解在某些条件下是一致的（即存在“强对偶性”），这意味着可以通过求解对偶问题来间接求解原问题。

总结来说，拉格朗日对偶函数是一种通过引入乘子并考虑约束条件的最小化，将复杂的优化问题转化为易处理的对偶形式，从而简化求解过程的工具。
#### 弱对偶性和对偶间隙
**弱对偶性**和**对偶间隙**是优化理论中对原始问题和对偶问题之间关系的两个重要概念。


**弱对偶性**表明，对于任意一个优化问题，**对偶问题的最优值始终小于或等于原问题的最优值**。这一性质普遍适用于带有约束的优化问题。

具体来说，假设我们有以下优化问题：

- 原问题（也称为主问题）：
  \[
  \begin{array}{rl}
  \min & f(x) \\
  \text{s.t.} & g_i(x) \leq 0, \quad i = 1, \cdots, m, \\
              & h_j(x) = 0, \quad j = 1, \cdots, n,
  \end{array}
  \]
- 对偶问题：
  \[
  \begin{array}{rl}
  \max & g(\lambda, \nu) \\
  \text{s.t.} & \lambda_i \geq 0, \quad i = 1, \cdots, m,
  \end{array}
  \]

在这种情况下，弱对偶性可以表示为：
\[
g(\lambda^*, \nu^*) \leq f(x^*),
\]
其中，\(x^*\) 是原问题的最优解，\((\lambda^*, \nu^*)\) 是对偶问题的最优解。即对偶问题所得到的最优值（最大值）不会超过原问题的最优值（最小值）。

弱对偶性对任何优化问题都成立，即使没有满足一些特殊条件（如凸性）。

**对偶间隙**（Duality Gap）是指原问题的最优值与对偶问题的最优值之间的差异。数学上，若原问题的最优值是 \(f(x^*)\)，对偶问题的最优值是 \(g(\lambda^*, \nu^*)\)，那么对偶间隙定义为：

\[
\text{对偶间隙} = f(x^*) - g(\lambda^*, \nu^*)
\]

如果对偶间隙为0，则意味着原问题和对偶问题的最优值相等，此时存在所谓的**强对偶性**。即：

\[
f(x^*) = g(\lambda^*, \nu^*)
\]

**总结：**

- **弱对偶性**：对偶问题的最优值永远小于或等于原问题的最优值。
- **对偶间隙**：原问题最优值与对偶问题最优值之间的差距，若对偶间隙为0，则表明存在强对偶性。

弱对偶性在所有优化问题中都成立，而对偶间隙则描述了原问题和对偶问题之间的差异，当对偶间隙为0时，表示我们通过对偶问题成功解决了原问题。

### 强对偶性和Slater约束准则

 **强对偶性**和**Slater约束条件**在凸优化理论中起着非常重要的作用，尤其是当我们讨论原问题和对偶问题之间的关系时。

### 1. 强对偶性
**强对偶性**指的是原问题的最优解与对偶问题的最优解相等，即两者的最优值是相同的。若存在强对偶性，说明原问题的最优值与对偶问题的最优值没有差距，对偶间隙为零。

数学上，假设 \(x^*\) 是原问题的最优解，\((\lambda^*, \nu^*)\) 是对偶问题的最优解，则**强对偶性**表示：

\[
f(x^*) = g(\lambda^*, \nu^*),
\]
其中 \(f(x^*)\) 是原问题的最小值，\(g(\lambda^*, \nu^*)\) 是对偶问题的最大值。

如果优化问题具有强对偶性，则我们可以通过求解对偶问题来间接求解原问题。在凸优化中，强对偶性在某些条件下成立，而**Slater约束条件**是确保强对偶性成立的常用条件之一。

### 2. Slater约束条件（Slater's Condition）
**Slater约束条件**是一个适用于凸优化问题的充分条件，用于保证强对偶性成立。

考虑一个凸优化问题：

\[
\begin{array}{rl}
\min & f(x) \\
\text{s.t.} & g_i(x) \leq 0, \quad i = 1, \cdots, m, \\
            & h_j(x) = 0, \quad j = 1, \cdots, n,
\end{array}
\]

其中，目标函数 \(f(x)\) 是凸的，约束 \(g_i(x)\) 是凸函数，\(h_j(x)\) 是仿射函数（线性约束的一种）。

**Slater约束条件**描述如下：

- **如果问题是凸优化问题，并且所有不等式约束 \(g_i(x)\) 是严格凸的，那么存在一个可行解 \(x'\) 使得：**
  \[
  g_i(x') < 0, \quad i = 1, \cdots, m,
  \]
 **即，存在一个严格可行的点 \(x'\)，它满足所有不等式约束的严格形式。**

当满足Slater条件时，对于凸优化问题可以确保**强对偶性成立**，也就是说，原问题的最优解与对偶问题的最优解是相等的。

### 总结：
- **强对偶性**：原问题的最优值与对偶问题的最优值相等，即对偶间隙为0。这通常可以通过求解对偶问题来间接求解原问题。
- **Slater约束条件**：这是一个充分条件，保证在凸优化问题中强对偶性成立。如果存在一个严格满足不等式约束的可行点（即严格可行解），那么该凸优化问题将具有强对偶性。

### KKT条件

对于上述优化问题，如果在某点 $ x^* $ 处满足一定的正则性条件（如满足约束资格条件），则 $ x^* $ 是最优解的必要条件为：

1. **可行性条件（Primal Feasibility）**：
   \[
   g_i(x^*) \leq 0, \quad \forall i = 1, 2, \dots, m
   \]
   \[
   h_j(x^*) = 0, \quad \forall j = 1, 2, \dots, p
   \]

2. **对偶可行性条件（Dual Feasibility）**：
   存在拉格朗日乘子 $ \lambda_i \geq 0 $ 对于所有不等式约束，满足：
   \[
   \lambda_i \geq 0, \quad \forall i = 1, 2, \dots, m
   \]

3. **互补松弛条件（Complementary Slackness）**：
   \[
   \lambda_i \cdot g_i(x^*) = 0, \quad \forall i = 1, 2, \dots, m
   \]
   这意味着对于每一个不等式约束，要么约束是紧的（即 $ g_i(x^*) = 0 $），要么对应的拉格朗日乘子为零。

4. **梯度平衡条件（Stationarity）**：
   \[
   \nabla f(x^*) + \sum_{i=1}^m \lambda_i \nabla g_i(x^*) + \sum_{j=1}^p \mu_j \nabla h_j(x^*) = 0
   \]
   其中，$ \mu_j $ 是等式约束的拉格朗日乘子。

**解释与应用**

- **可行性条件**确保解 $ x^* $ 满足所有的约束。
- **对偶可行性条件**保证了拉格朗日乘子 $ \lambda_i $ 的非负性，这与不等式约束的方向相关。
- **互补松弛条件**表明只有在约束紧时，对应的乘子才可能非零，反之则乘子为零。
- **梯度平衡条件**表示在最优点，目标函数的梯度可以表示为约束函数梯度的线性组合，表明没有进一步改进的方向。

### 罚函数法
### 增广拉格朗日法

